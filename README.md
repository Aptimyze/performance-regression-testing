# WJAX Demonstration Application
## Docker (Unix Systems)
### Jenkins
Start Jenkins by executing the `start_jenkins.sh` script. Now go to http://localhost:8090 in your browser to open up the Jenkins web interface. After the initial startup you are asked to enter the administration password which is generated by Jenkins. The administrator password can be found in the logs of the docker container by using the command `docker logs -f jenkins` in your command line interface. Look for a line similiar to this one:


```
Jenkins initial setup is required. An admin user has been created and a password generated.
Please use the following password to proceed to installation:

0f3b91ab8e8d479781085870f31f6de9

This may also be found at: /var/jenkins_home/secrets/initialAdminPassword
```

When you have found this line please copy paste the admin password to Jenkins and create your own admin user afterwards.

#### Install required plugins
Go to the available plugins page (http://localhost:8090/pluginManager/available) in Jenkins and install the following two plugins:

- Performance Plugin
- Parameterized Trigger Plugin

#### Import Jobs
There are two jobs in this repository which have to be imported into Jenkins by copy pasting the folders into `jenkins_home/jobs`. After copying the jobs you have to restart Jenkins with `docker restart jenkins`. Afte restaring Jenkins you should now be able to see the following two new jobs in the Jenkins job overview:

- spring-pet-clinic CI load test
- spring-pet-clinic-cleanup

### InfluxDB
Start the InfluxDB database by calling the `./start_influxdb.sh` script.

### Grafana
Next we are going to startup the dashboard tool called Grafana. For that start the docker container with the `./start_grafana` script. After starting the docker you should now be able to reach Grafana by going to http://localhost:3000 in your browser. To login use the default `admin` user with the default password `admin`.
The next step is to add the InfluxDB as your datasource to Grafana.

#### Add Data Source
##### JMeter
Click on the add data source icon and enter `JMeter` as name for this datasource. Next select the `InfluxDB` from the available database types list.
For the HTTP settings select http://localhost:8086 as your datasource URL and use `Direct` as access method.
We can skip the rest and go directly to the InfluxDB Details section where we will enter `jmeter` as Database and `admin` as user and password. Click on Save and Test and a green message should appear that the datasource is working.

#### InspectIT
Click on the add data source icon and enter `InspectIT` as name for this datasource. Next select the `InfluxDB` from the available database types list.
For the HTTP settings select http://localhost:8086 as your datasource URL and use `Direct` as access method.
We can skip the rest and go directly to the InfluxDB Details section where we will enter `inspectit` as Database and `admin` as user and password. Click on Save and Test and a green message should appear that the datasource is working.

#### Installing Dashboards
Next we are going to import some Dashboards we need to see live JMeter data and InspectIT data. To do so go to the dashboard import page ( http://localhost:3000/dashboard/new?editview=import&orgId=1)
and import the following two dashbards:

- https://grafana.com/dashboards/1152  
Select `JMeter` as datasource
- https://grafana.com/dashboards/1691  
Select `InspectIT` as datasource

### InspectIT
#### Install InspectIT
Go to http://www.inspectit.rocks/ and download the latest InspectIT version for your operating system.
Start the installation process by executing the `jar` file.
Select your preferred installation directory. You are only required to install the `inspectIt UI` as the
other two components will run inside the docker containers.
